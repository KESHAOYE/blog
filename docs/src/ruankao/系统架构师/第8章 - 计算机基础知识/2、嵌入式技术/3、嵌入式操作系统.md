# 3、嵌入式操作系统

## 定义

是指用于嵌入式系统的操作系统。嵌入式操作系统是一种用途广泛的系统软件，负责嵌入式系统的全部软、硬件资源分配、任务调度、控制、协调并行活动等工作。通常包括与硬件相关的底层驱动软件、系统内核、设备驱动接口、通信协议、图形界面、标准化浏览器等。

## 分类

### 根据对时间的敏感程度可以分为：

- 非实时操作系统
- 实时操作系统：能够在**指定或者确定的时间内**完成系统功能和外部或内部、同步或异步事件做出响应的系统，调度算法是抢占方式

#### 算法

- 优先级调度算法：优先级调度算法是一种根据任务的优先级来决定其执行顺序的调度策略。每个任务被分配一个优先级，调度程序总是选择就绪队列中优先级最高的任务来执行。优先级可以静态分配（在任务创建时确定且不再改变），也可以动态分配（根据任务的某些特性在运行时调整）。
- 抢占式优先级调度算法：抢占式优先级调度算法是优先级调度算法的一种变体。在这种模式下，如果一个新到达的就绪任务的优先级高于当前正在执行的任务的优先级，调度程序会立即中断当前任务的执行，将 CPU 分配给这个更高优先级的任务。
- 最早截止期调度算法：最早截止期调度算法是一种动态优先级调度算法，主要用于实时系统中。它根据任务的截止期限来分配优先级，截止期限越早的任务拥有越高的优先级。
- 最晚截止期调度算法：最晚截止期调度算法 (LDF) 并不像 EDF 那样普遍和直接应用于通用的 CPU 调度。它的核心思想是优先调度那些截止期限最晚的任务。这种策略听起来可能有些反直觉，因为它似乎会推迟那些紧急的任务。

### 根据对安全性的要求来看可以分为：

- 安全攸关系统：也称为安全关键系统或者安全生命关键系统，是指其不正确的功能或者失效会**导致人员伤亡、财产损失等严重后果**的计算机系统
- 非安全攸关系统

## 特点

- 微型化
- 代码质量高
- 专业化
- 实时性强（实时性系统的最核心特点）
- 可裁剪、可配置（功能可定制）
- 易移植性

## 内核结构

内核是操作系统的核心部分，它管理着系统的各种资源。内核可以看成链接应用程序和硬件的一座桥梁，是直接运行在硬件上的最基础的软件实体。

### 分类

从内核的架构来划分

#### 宏内核（单体内核）

内核实现的功能多就是宏内核，用户空间只做应用程序，使用系统 API 来实现调用。
优点是减少了进程间通信和状态切换的系统开销
缺点是内核庞大，占用资源多，不易剪裁；且系统的稳定性和安全性不好

#### 微内核

内核实现的功能少就是微内核，鸿蒙就是微内核
只实现基础功能，将图形系统、文件系统、设备驱动及通信功能放在内核之外
优点是结构清晰，利于协作开发；方便裁剪和移植；系统的可靠性和安全性高；可用于分布式系统
缺点是用户状态和内核状态需要频繁切换，系统效率不如宏内核，性能偏低

## 鸿蒙

<img src='/picture/软考/鸿蒙架构图.png'/>

哄蒙整体采用分层的层次化设计，从下到上依次为内核层、系统服务层、框架层和应用层

### 技术特点

- **分布式架构首次应用于终端 OS，实现跨终端无缝协同体验**
- 确定时延引擎和高性能 IPC 技术实现系统天生流畅
- **基于微内核机构重塑终端设备可信安全**
- 通过统一 IDE 一次开发，多端部署，实现跨终端生态共享
